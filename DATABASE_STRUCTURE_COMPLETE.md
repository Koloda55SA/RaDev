# ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é!

## üéâ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ PostgreSQL –Ω–∞ VPS —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—è–º Firebase:

### üìä –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (18 —Ç–∞–±–ª–∏—Ü):

1. ‚úÖ **Users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –ø–æ–ª—è–º–∏ –∏–∑ Firebase)
2. ‚úÖ **Subscriptions** - –ü–æ–¥–ø–∏—Å–∫–∏ (following/followers)
3. ‚úÖ **Messages** - –°–æ–æ–±—â–µ–Ω–∏—è (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ + –≥–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç)
4. ‚úÖ **ProfileLikes** - –õ–∞–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
5. ‚úÖ **BlogPosts** - –ë–ª–æ–≥ –ø–æ—Å—Ç—ã
6. ‚úÖ **Projects** - –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø—Ä–æ–µ–∫—Ç—ã
7. ‚úÖ **Reviews** - –û—Ç–∑—ã–≤—ã
8. ‚úÖ **ProjectRequests** - –ó–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã
9. ‚úÖ **ChatHistory** - –ò—Å—Ç–æ—Ä–∏—è AI —á–∞—Ç–∞
10. ‚úÖ **ProjectComments** - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—Ä–æ–µ–∫—Ç–∞–º
11. ‚úÖ **EmailSubscriptions** - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ email
12. ‚úÖ **PromoCodes** - –ü—Ä–æ–º–æ–∫–æ–¥—ã
13. ‚úÖ **UserProfiles** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
14. ‚úÖ **uid_mapping** - –ú–∞–ø–ø–∏–Ω–≥ Firebase UID ‚Üí UUID
15. ‚úÖ **Courses** - –ö—É—Ä—Å—ã (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)
16. ‚úÖ **Chapters** - –ì–ª–∞–≤—ã –∫—É—Ä—Å–æ–≤ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)
17. ‚úÖ **Lessons** - –£—Ä–æ–∫–∏ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)
18. ‚úÖ **UserProgress** - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫—É—Ä—Å–∞–º (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è)

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### Users (—Ä–∞—Å—à–∏—Ä–µ–Ω–∞)
- `Id` (UUID) - Primary Key
- `Email`, `Username`, `DisplayName`
- `nickname` - –¥–æ–±–∞–≤–ª–µ–Ω–æ
- `achievements` (JSONB) - –º–∞—Å—Å–∏–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- `privacy` (JSONB) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- `stats` (JSONB) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `bio` - –±–∏–æ–≥—Ä–∞—Ñ–∏—è
- `Role`, `AvatarUrl`, –∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è

### Subscriptions
- `user_id` ‚Üí `Users(Id)`
- `following` (JSONB) - –º–∞—Å—Å–∏–≤ UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥–ø–∏—Å–∞–Ω
- `followers` (JSONB) - –º–∞—Å—Å–∏–≤ UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã

### Messages
- `sender_id` ‚Üí `Users(Id)`
- `receiver_id` ‚Üí `Users(Id)` –∏–ª–∏ NULL (–¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç–∞)
- `content` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `encrypted_content` - –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `image_url`, `file_url` - —Ñ–∞–π–ª—ã
- `message_type` - text, image, code, file
- `participants` (JSONB) - –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### ProfileLikes
- `user_id` ‚Üí `Users(Id)`
- `liked_by` (JSONB) - –º–∞—Å—Å–∏–≤ UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤

### BlogPosts
- `title`, `slug`, `content`, `excerpt`
- `author_id` ‚Üí `Users(Id)`
- `tags` (JSONB)
- `published`, `views`, `likes`

### Projects
- `title`, `slug`, `description`
- `type` - web, mobile, desktop, diploma
- `author` - syyimyk, abdykadyr, both
- `technologies` (JSONB)
- `images` (JSONB)
- `github_url`, `demo_url`

### Reviews
- `user_id` ‚Üí `Users(Id)`
- `author`, `email`, `project`
- `rating` (1-5)
- `text`, `photo_url`
- `verified`

### –ò –¥—Ä—É–≥–∏–µ —Ç–∞–±–ª–∏—Ü—ã...

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **JSONB –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ –∏ –æ–±—ä–µ–∫—Ç–æ–≤:**
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏

3. **–ò–Ω–¥–µ–∫—Å—ã:**
   - –ü–æ –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–∞–º
   - –ü–æ –¥–∞—Ç–∞–º —Å–æ–∑–¥–∞–Ω–∏—è
   - GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è JSONB –ø–æ–ª–µ–π
   - –ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç–∞)

4. **–í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏:**
   - CASCADE —É–¥–∞–ª–µ–Ω–∏–µ –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - SET NULL –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π

## üîó –ú–∞–ø–ø–∏–Ω–≥ Firebase UID ‚Üí PostgreSQL UUID

–¢–∞–±–ª–∏—Ü–∞ `uid_mapping` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑–∞—Ç—å:
- Firebase Authentication UID (—Å—Ç—Ä–æ–∫–∞)
- PostgreSQL UUID (–¥–ª—è —Ç–∞–±–ª–∏—Ü)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```sql
-- –ü–æ–ª—É—á–∏—Ç—å UUID –ø–æ Firebase UID
SELECT uuid FROM uid_mapping WHERE firebase_uid = 'firebase-uid-here';

-- –°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
INSERT INTO uid_mapping (firebase_uid, uuid) 
VALUES ('firebase-uid', gen_random_uuid());
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
1. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å frontend –∫–æ–¥ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ C# API
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å `lib/firebase/users.ts` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å C# API
3. ‚úÖ –£–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Firestore –¥–ª—è –¥–∞–Ω–Ω—ã—Ö (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ Auth)

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å C# Backend –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
2. ‚è≥ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å frontend –∫–æ–¥
3. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

*–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")*




