# üìä –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ VPS

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. C# Backend API –∑–∞–ø—É—â–µ–Ω –Ω–∞ VPS
- **IP:** 213.199.56.27
- **–ü–æ—Ä—Ç:** 5000 (HTTP), 5001 (HTTPS)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å uploads:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Backend –Ω–∞ VPS
```
/opt/freedip-backend/backend/FreeDip.Api/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îú‚îÄ‚îÄ AuthController.cs
‚îÇ   ‚îú‚îÄ‚îÄ CoursesController.cs
‚îÇ   ‚îú‚îÄ‚îÄ HealthController.cs
‚îÇ   ‚îú‚îÄ‚îÄ MessagesController.cs (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ ProgressController.cs
‚îÇ   ‚îî‚îÄ‚îÄ SocialController.cs (–ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏, –ø–æ–∏—Å–∫)
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îú‚îÄ‚îÄ AuthService.cs
‚îÇ   ‚îú‚îÄ‚îÄ UserService.cs
‚îÇ   ‚îú‚îÄ‚îÄ CourseService.cs
‚îÇ   ‚îú‚îÄ‚îÄ EmailService.cs
‚îÇ   ‚îú‚îÄ‚îÄ EncryptionService.cs
‚îÇ   ‚îî‚îÄ‚îÄ VirusScanService.cs
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ User.cs
‚îÇ   ‚îú‚îÄ‚îÄ Course.cs
‚îÇ   ‚îî‚îÄ‚îÄ Message.cs
‚îú‚îÄ‚îÄ Data/
‚îÇ   ‚îî‚îÄ‚îÄ ApplicationDbContext.cs
‚îî‚îÄ‚îÄ Program.cs (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω - —Å–æ–∑–¥–∞–µ—Ç uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **–ü–æ—Ä—Ç:** 5432
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** freedip-postgres

### 4. Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- ‚úÖ freedip-api (C# Backend) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ freedip-postgres (PostgreSQL) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ nginx-proxy - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ minio (—Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ redis-cache - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ judge0 (–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞) - —Ä–∞–±–æ—Ç–∞–µ—Ç

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏/–º–∏–≥—Ä–∞—Ü–∏–∏

### 1. Frontend —Ñ–∞–π–ª—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ Firebase Firestore

#### ‚úÖ –£–∂–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã (—Å–æ–≥–ª–∞—Å–Ω–æ MIGRATSIYA_ZAVERSHENA.md):
- `app/chat/page.tsx` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `apiClient.getPrivateChat()`
- `components/chat/GlobalChat.tsx` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `apiClient.getGlobalChat()`
- `app/profile/page.tsx` - –ø—Ä–æ—Ñ–∏–ª—å ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `apiClient.getUserProfile()`
- `app/users/search/page.tsx` - –ø–æ–∏—Å–∫ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `socialApi.searchUsersByNickname()`
- `app/users/[userId]/page.tsx` - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç C# API

#### ‚ö†Ô∏è –í—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Firebase Firestore:
1. **`components/ai/ChatBot.tsx`** (—Å—Ç—Ä–æ–∫–∏ 149-157)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –≤ Firestore: `collection(getDb(), 'chat_history')`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ C# API –∏–ª–∏ —É–±—Ä–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (AI —á–∞—Ç –º–æ–∂–µ—Ç –Ω–µ —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

2. **`lib/firebase/users.ts`**
   - `initializeUserRole()` - —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Firestore
   - `getUserProfile()` - –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ Firestore
   - `incrementUserStat()` - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ Firestore
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –µ—â–µ, –∏–ª–∏ —É–∂–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ C# API

3. **`lib/firebase/subscriptions.ts`**
   - –ü–æ–¥–ø–∏—Å–∫–∏/–ø–æ–¥–ø–∏—Å—á–∏–∫–∏
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –µ—â–µ

4. **`lib/firebase/globalChat.ts`**
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–π —á–∞—Ç
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –µ—â–µ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω)

5. **–î—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã:**
   - `app/blog/page.tsx` - –±–ª–æ–≥
   - `app/portfolio/page.tsx` - –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
   - `app/reviews/page.tsx` - –æ—Ç–∑—ã–≤—ã
   - `app/admin/page.tsx` - –∞–¥–º–∏–Ω–∫–∞
   - `lib/courses/userProgress.ts` - –ø—Ä–æ–≥—Ä–µ—Å—Å –∫—É—Ä—Å–æ–≤

### 2. Firebase Storage
- **–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–≤ –∏ —Ñ–∞–π–ª–æ–≤ –≤ —á–∞—Ç–µ
- **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ (—á–µ—Ä–µ–∑ `apiClient.uploadAvatar()`)
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–¥—É—Ç —á–µ—Ä–µ–∑ C# API –Ω–∞ VPS

### 3. LocalStorage
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `localStorage` –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ VPS
- **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ localStorage

## üìã –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å uploads –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π - **–í–´–ü–û–õ–ù–ï–ù–û**
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —á–∞—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ C# API
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ C# API
4. ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Firebase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–∞–Ω–Ω—ã–µ
1. ‚è≥ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é AI —á–∞—Ç–∞ –Ω–∞ C# API (–∏–ª–∏ —É–±—Ä–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `lib/firebase/`
3. ‚è≥ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–≥, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ, –æ—Ç–∑—ã–≤—ã –Ω–∞ C# API

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
1. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ localStorage
2. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ frontend
3. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Frontend –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å):
```env
NEXT_PUBLIC_API_URL=http://213.199.56.27:5000/api
NEXT_PUBLIC_USE_API_BACKEND=true
```

### Backend –Ω–∞ VPS:
- **URL:** http://213.199.56.27:5000/api
- **Health check:** http://213.199.56.27:5000/api/health
- **Swagger:** http://213.199.56.27:5000/swagger (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- Firebase Authentication –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏–Ω–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ PostgreSQL –Ω–∞ VPS
- –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ VPS (—á–µ—Ä–µ–∑ MinIO –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)
- LocalStorage –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")*




